{% extends 'base.html' %}
{% block title %} Recipe Details {% endblock %}

{% block body %}

{% if is_API %}
    <h1 id="title"> {{ recipe['title'] }}</h1>
    <p>
        <a href="{{recipe['sourceUrl']}}">
          {{recipe['sourceUrl']}}
        </a>
    </p>
{% endif %}

{% if not is_API %}
    <h1 id="title">{{ recipe.title }}</h1>
    <p>
        <a href="{{ recipe.source_url}}">
          {{recipe.source_url}}
          
        </a>
    </p>
    <input type="hidden" id="source_url" name="source_url" value="{{recipe.source_url}}">
{% endif %}

{% if session.get('user_email') %}
    {% if is_API %}
      <button id="save">Save Recipe</button>
{% endif %}
    
    {% if not is_API %}
        This recipe is in your Cookbook. Would you like to edit it?
        <button id="edit">Edit Recipe</button>
    
    {% endif %}
    <form>
        {% if recipe.recipe_id not in rated_recipe_ids %}
        <h2>Rate Recipe</h2>
            <form id= "rate" method="POST">
            <input type="hidden" name="source_url" id="source" value="{{recipe['sourceUrl']}}">
            <p>
                Rating:
                <select name="rating" id="rating">
                <option value="">Select rating</option>
                {% for num in range(6) %}
                    <option value="{{ num }}">{{ num }}</option>
                {% endfor %}
                </select>
            </p>
        <p><input type="submit"></p>
    </form>
        {% endif %}
{% endif %}

<p>
{% if is_API %}
    <img src="{{recipe['image']}}" width="25%">
    <input type="hidden" id="image" value="{{recipe['image']}}">
{% endif %}
</p>

<p>
{% if not is_API %}
    <img src="{{ recipe.image_path }}" width="25%"> 
    <input type="hidden" id="image" name="image" value="{{recipe.image_path}}">
{% endif %}
</p>

{% if is_API %}
    <div>    
        <ul id="ingredients">
            {% for ingredient in ingredients %}
                <li>
                    {{ ingredient }}
                </li>
            {% endfor %}
    </div>             

    <div>        
        <p>
            <ul id="instructions">
                {% for instruction in instructions %}
                    <li>
                        {{ instruction }}
                    </li>
                {% endfor %}
            </ul>
        </p>
    </div>
{% endif %}

{% if not is_API %}
        <div id="ingredients">
            {{ recipe.ingredients }}
        </div>
    <p>
        <div id="instructions">
            {{ recipe.instructions }}
        </div>
    </p>
<div id="edit_recipe"></div>
{% endif %}

<script src="/static/save.js"></script>
<script src="/static/edit.js"></script>
{% endblock %}